(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6836d802"],{"3e8f":function(e,t){},"52e7":function(e,t,a){"use strict";var r=a("b2da"),i=a.n(r);i.a},b2da:function(e,t,a){},dfa7:function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"g",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"a",function(){return s});var r=a("eca5");function i(e){return Object(r["a"])({url:"/article/selectByPage",method:"POST",params:e})}function n(e){return Object(r["a"])({url:"/article/setTop?articleId="+e,method:"POST"})}function o(e){return Object(r["a"])({url:"/article/cancleTop?articleId="+e,method:"POST"})}function l(e){return Object(r["a"])({url:"/article/moveBackward?articleId="+e,method:"POST"})}function c(e){return Object(r["a"])({url:"/article/moveForward?articleId="+e,method:"POST"})}function d(e){return Object(r["a"])({url:"/article/selectOne?articleId="+e,method:"POST"})}function s(e){return Object(r["a"])({url:"/article/addOrUpdateOne",method:"POST",params:e})}},ef46:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"文章标题",prop:"title"}},[a("Input",{attrs:{placeholder:"文章标题"},model:{value:e.formValidate.title,callback:function(t){e.$set(e.formValidate,"title",t)},expression:"formValidate.title"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"封面图片",prop:"coverUrl"}},[a("jsUpload",{model:{value:e.formValidate.coverUrl,callback:function(t){e.$set(e.formValidate,"coverUrl",t)},expression:"formValidate.coverUrl"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("Upload",{staticClass:"upload-ed",attrs:{"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-success":e.handleSuccess,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"//47.105.135.127:8080/public/uploadFile",hidden:""}}),a("FormItem",{staticStyle:{"min-height":"320px"},attrs:{label:"文章内容",prop:"content"}},[a("quill-editor",{ref:"QuillEditor",staticClass:"diy-vueditor",attrs:{options:e.editorOption},model:{value:e.formValidate.content,callback:function(t){e.$set(e.formValidate,"content",t)},expression:"formValidate.content"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit(e.formValidate)}}},[e._v(e._s(e.articleId?"修改":"新增"))]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)],1)],1)],1)},i=[],n=(a("7f7f"),a("dfa7")),o=a("2ce6"),l=(a("3e8f"),[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]]),c={name:"articleAdd",components:{jsUpload:o["a"]},data:function(){return{formValidate:{title:"",coverUrl:"",content:""},ruleValidate:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"}],coverUrl:[{required:!0,message:"请输入文章内容",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},articleId:"",editorOption:{modules:{toolbar:{container:l,handlers:{image:function(e){e?document.querySelector(".upload-ed input").click():this.quill.format("image",!1)}}}}}}},created:function(e){var t=this.Jump.deep(this.$route.query);t.articleId&&this.start(t.articleId)},methods:{start:function(e){var t=this;Object(n["f"])(e).then(function(e){0==e.code?(t.formValidate.coverUrl=e.data.coverUrl,t.formValidate.title=e.data.title,t.formValidate.content=e.data.content,t.articleId=e.data.articleId):e.text?t.$Message.warning(e.text):t.$Message.warning("错误")})},handleSuccess:function(e){var t=this.$refs.QuillEditor.quill;if(this.$Spin.hide(),e){console.log(e);var a=t.getSelection().index;t.insertEmbed(a,"image",e.data),t.setSelection(a+1),this.$Message.info("图片设置成功")}else this.$Message.error("图片插入失败")},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"".concat(e.name," 的文件格式不正确，请选择JPG或PNG")})},handleMaxSize:function(e){this.$Notice.warning({title:"图片大小超过限制",desc:"".concat(e.name," 文件太大，不能超过2M")})},handleBeforeUpload:function(e){this.$Spin.show()},handleSubmit:function(e){var t=this;this.formValidate.title?this.formValidate.coverUrl?this.formValidate.content?(this.articleId&&(this.formValidate.articleId=this.articleId),this.$Modal.confirm({title:"确认",content:"<p>确认".concat(this.articleId?"修改这":"新建一","篇文章</p>"),okText:"确认",cancelText:"取消",onOk:function(){Object(n["a"])(t.formValidate).then(function(e){0==e.code?(t.$Message.info("".concat(t.articleId?"修改":"新建","成功")),t.$router.push("/home/articleList")):e.text?t.$Message.warning(e.text):t.$Message.warning("错误")})},onCancel:function(){t.$Message.info("请确认".concat(t.articleId?"修改":"新建","后再提交"))}})):this.$Message.warning("请填写文章主内容"):this.$Message.warning("请上传文章封面图片"):this.$Message.warning("请添加文章标题")}}},d=c,s=(a("52e7"),a("2877")),u=Object(s["a"])(d,r,i,!1,null,"e00ad3f2",null);t["default"]=u.exports}}]);