(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-659d27fa"],{"33bf":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return c}),a.d(e,"d",function(){return n}),a.d(e,"e",function(){return o});var r=a("eca5");function i(t){return Object(r["a"])({url:"/teacher/addOrUpdateOne",method:"POST",params:t})}function l(t){return Object(r["a"])({url:"/teacher/deleteOne?teacherId="+t,method:"POST"})}function c(t){return Object(r["a"])({url:"/teacher/selectActivitiesByTitle?title="+t,method:"POST"})}function n(t){return Object(r["a"])({url:"/teacher/selectByPage",method:"POST",params:t})}function o(t){return Object(r["a"])({url:"/teacher/selectOneById?teacherId="+t,method:"POST"})}},f0e9:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"教官姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"教官姓名"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"上传图片",prop:"headPicUrl"}},[a("jsUpload",{model:{value:t.formValidate.headPicUrl,callback:function(e){t.$set(t.formValidate,"headPicUrl",e)},expression:"formValidate.headPicUrl"}})],1)],1),a("Col",{attrs:{span:"16"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"教官一句话",prop:"shortWord"}},[a("Input",{attrs:{type:"textarea",placeholder:"教官一句话"},model:{value:t.formValidate.shortWord,callback:function(e){t.$set(t.formValidate,"shortWord",e)},expression:"formValidate.shortWord"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"教官性别",prop:"sex"}},[a("RadioGroup",{model:{value:t.formValidate.sex,callback:function(e){t.$set(t.formValidate,"sex",e)},expression:"formValidate.sex"}},t._l(t.teacherSex,function(e){return e.val<3?a("Radio",{attrs:{label:e.val}},[t._v(t._s(e.title))]):t._e()}),1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"教官种类",prop:"labelList"}},[a("CheckboxGroup",{attrs:{label:""},model:{value:t.formValidate.labelList,callback:function(e){t.$set(t.formValidate,"labelList",e)},expression:"formValidate.labelList"}},t._l(t.teacherLabel,function(e){return a("Checkbox",{attrs:{label:e.val}},[t._v(t._s(e.title))])}),1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"添加活动"}},[a("Input",{staticStyle:{width:"40%"},attrs:{type:"text",placeholder:"请输入活动信息"},model:{value:t.searchActivity,callback:function(e){t.searchActivity=e},expression:"searchActivity"}}),a("Button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.searchActivityClick(t.searchActivity)}}},[t._v("添加活动")])],1)],1),t.formValidate.activityList.length?a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"活动经历"}},t._l(t.formValidate.activityList,function(e,r){return a("Button",{staticStyle:{"margin-left":"8rpx"},attrs:{type:"default"}},[t._v("\n          "+t._s(e.activityTitle)+"\n          "),a("Icon",{attrs:{type:"md-close"},on:{click:function(e){return t.activityListDel(r)}}})],1)}),1)],1):t._e(),a("Col",{attrs:{span:"16"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"教官评语",prop:"remark"}},[a("Input",{attrs:{type:"textarea",placeholder:"教官一句话"},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1)],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v(t._s(t.formValidate.teacherId?"修改教官信息":"新建教官"))]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)},i=[],l=(a("7f7f"),a("ac6a"),a("33bf")),c=a("4bb0"),n=a("2ce6"),o={components:{jsUpload:n["a"]},data:function(){return{formValidate:{name:"",headPicUrl:"",sex:"",shortWord:"",remark:"",activityList:[],labelList:[]},searchActivity:"",teacherLabel:c["a"].teacherLabel,teacherSex:c["a"].teacherSex,teacherActivities:[],ruleValidate:{name:[{required:!0,message:"请输入教官姓名",trigger:"blur"}],headPicUrl:[{required:!0,message:"填入教官头像",trigger:"change"}]},outList:[]}},created:function(){var t=this,e=this.Jump.deep(this.$route.query);e.teacherId&&Object(l["e"])(e.teacherId).then(function(e){console.log(e),t.formValidate=e.data}),Object(l["c"])().then(function(e){t.teacherActivities=e.data})},methods:{searchActivityClick:function(t){var e=this;t?Object(l["c"])(t).then(function(a){if(0==a.code)if(a.data.length)if(e.formValidate.activityList.length){var r=e.formValidate.activityList,i=a.data;i.forEach(function(t){!r.some(function(e){return console.log(e.teacherId,t.teacherId),e.activityId==t.activityId})&&r.push(t)}),e.activityList=r,e.$Message.info("成功添加活动并且去除重复活动")}else e.$Message.info("添加跟「".concat(t,"」有关的活动")),e.formValidate.activityList=a.data;else e.$Message.warning("暂未找跟".concat(t,"有关的活动"));else a.text?e.$Message.warning(a.text):e.$Message.warning("错误")}):this.$Message.warning("请输入活动名称")},activityListDel:function(t){var e=this.formValidate.activityList;e.splice(e.indexOf(t),1),this.activityList=e},handleSubmit:function(t){var e=this;this.formValidate.name?this.formValidate.headPicUrl?this.$Modal.confirm({title:"确认",content:"<p>确认".concat(this.formValidate.teacherId?"修改此":"新建","教官信息</p>"),okText:"确认",cancelText:"取消",onOk:function(){Object(l["a"])(e.formValidate).then(function(t){0==t.code&&(e.$Message.info("".concat(e.formValidate.teacherId?"修改":"新建","成功")),e.$router.push("/home/coachList"))})},onCancel:function(){e.$Message.info("请确认".concat(e.formValidate.teacherId?"修改":"新建 ","后再提交"))}}):this.$Message.warning("请上传教官头像"):this.$Message.warning("请输入教官名称")},handleReset:function(t){this.$refs[t].resetFields()}}},s=o,d=a("2877"),u=Object(d["a"])(s,r,i,!1,null,"1c090460",null);e["default"]=u.exports}}]);