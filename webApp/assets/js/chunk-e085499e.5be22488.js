(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e085499e"],{"30a4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"活动名字",prop:"title"}},[a("Input",{attrs:{placeholder:"活动名字"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"封面图片",prop:"coverUrl"}},[a("jsUpload",{model:{value:t.formValidate.coverUrl,callback:function(e){t.$set(t.formValidate,"coverUrl",e)},expression:"formValidate.coverUrl"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"活动简介",prop:"introduction"}},[a("Input",{attrs:{type:"textarea",placeholder:"活动简介"},model:{value:t.formValidate.introduction,callback:function(e){t.$set(t.formValidate,"introduction",e)},expression:"formValidate.introduction"}})],1)],1),a("Col",{attrs:{span:"16"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"活动类别",prop:"typeList"}},[a("CheckboxGroup",{model:{value:t.formValidate.typeList,callback:function(e){t.$set(t.formValidate,"typeList",e)},expression:"formValidate.typeList"}},t._l(t.activityType,function(e){return a("Checkbox",{attrs:{label:e.val}},[t._v(t._s(e.title))])}),1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"添加教官"}},[a("Input",{staticStyle:{width:"40%"},attrs:{type:"text",placeholder:"请输入该教官信息"},model:{value:t.searchTeacher,callback:function(e){t.searchTeacher=e},expression:"searchTeacher"}}),a("Button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.searchTeacherClick(t.searchTeacher)}}},[t._v("添加教官")])],1)],1),t.formValidate.teacherList.length?a("Col",{attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"参与教官"}},t._l(t.formValidate.teacherList,function(e,i){return a("Button",{staticStyle:{"margin-left":"8rpx"},attrs:{type:"default"}},[t._v("\n            "+t._s(e.teacherName)+"\n            "),a("Icon",{attrs:{type:"md-close"},on:{click:function(e){return t.teacherListDel(i)}}})],1)}),1)],1):t._e(),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"活动日期",prop:"startTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:t.defaultSize,type:"datetime",placeholder:"开始",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.formValidate.startTime,callback:function(e){t.$set(t.formValidate,"startTime",e)},expression:"formValidate.startTime"}})],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("--")]),a("Col",{staticStyle:{"margin-left":"-50px"},attrs:{span:"5"}},[a("FormItem",{attrs:{prop:"endTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:t.defaultSize,type:"datetime",placeholder:"结束",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.formValidate.endTime,callback:function(e){t.$set(t.formValidate,"endTime",e)},expression:"formValidate.endTime"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"活动"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.contentListIndex,callback:function(e){t.contentListIndex=e},expression:"contentListIndex"}},t._l(t.formValidate.contentList,function(e,i){return a("Radio",{key:e.teacherId,attrs:{label:i}},[t._v("第"+t._s(i+1)+"天")])}),1),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.addContentList(t.contentListIndex)}}},[t._v("增加一天")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"default"},on:{click:function(e){return t.deleteContentList(t.contentListIndex)}}},[t._v("删除当前")])],1)],1)],1),t._l(t.formValidate.contentList[t.contentListIndex],function(e,i){return a("Row",{key:i,staticStyle:{border:"1px solid #f9f9f9",margin:"10px",padding:"50px"}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"图片名称"}},[a("Input",{attrs:{type:"text",placeholder:"图片名称"},model:{value:e.picName,callback:function(a){t.$set(e,"picName",a)},expression:"item.picName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"项目名称"}},[a("jsUpload",{model:{value:e.picUrl,callback:function(a){t.$set(e,"picUrl",a)},expression:"item.picUrl"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"项目简介"}},[a("Input",{attrs:{type:"textarea",placeholder:"项目简介"},model:{value:e.plan,callback:function(a){t.$set(e,"plan",a)},expression:"item.plan"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"活动时间"}},[a("Input",{attrs:{type:"text",placeholder:"活动时间"},model:{value:e.slot,callback:function(a){t.$set(e,"slot",a)},expression:"item.slot"}})],1)],1),a("Col",{staticStyle:{"margin-top":"20px"},attrs:{span:"24"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"项目操作"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.addContentUp(i)}}},[t._v("新建项目")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.deleteContentThis(i)}}},[t._v("删除此项目")])],1)],1)],1)}),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit(t.formValidate)}}},[t._v(t._s(t.activityId?"修改":"新建活动"))]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],2)],1)},n=[],r=(a("7f7f"),a("ac6a"),a("87a0")),o=(a("33bf"),a("4bb0")),s=a("2ce6"),c=(a("3e8f"),{components:{jsUpload:s["a"]},data:function(){return{formValidate:{title:"",coverUrl:"",typeList:[],teacherList:[],startTime:"",endTime:"",introduction:"",contentList:[[{picName:"",picUrl:"",plan:"",slot:""}]]},activityId:"",activityType:o["a"].activityType,ruleValidate:{title:[{required:!0,message:"请输入标题",trigger:"blur"}]},contentListIndex:0,defaultSize:"large",searchTeacher:"",searchTeacherList:[]}},created:function(){var t=this.Jump.deep(this.$route.query);t.activityId&&(this.activityId=t.activityId,this.start())},methods:{start:function(){var t=this;Object(r["e"])(this.activityId).then(function(e){0==e.code?t.formValidate=e.data:e.text?t.$Message.warning(e.text):t.$Message.warning("错误")})},searchTeacherClick:function(t){var e=this;console.log(t),t?Object(r["c"])(t).then(function(a){if(0==a.code)if(a.data.length)if(e.formValidate.teacherList.length){var i=e.formValidate.teacherList,n=a.data;n.forEach(function(t){!i.some(function(e){return console.log(e.teacherId,t.teacherId),e.teacherId==t.teacherId})&&i.push(t)}),e.teacherList=i,e.$Message.info("成功添加教官并且去除重复教官")}else e.$Message.info("添加跟「".concat(t,"」有关的教官")),e.formValidate.teacherList=a.data;else e.$Message.warning("暂未找到名为".concat(t,"的教官"));else a.text?e.$Message.warning(a.text):e.$Message.warning("错误")}):this.$Message.warning("请输入教官名称")},teacherListDel:function(t){var e=this.formValidate.teacherList;e.splice(e.indexOf(t),1),this.teacherList=e},addContentList:function(t){var e=this.formValidate.contentList;this.formValidate.contentList.length<7?(e.splice(t+1,0,[{picName:"",picUrl:"",plan:"",slot:""}]),this.formValidate.contentList=e,this.contentListIndex=t+1):this.$Message.warning("活动天数最多不能不过7天")},deleteContentList:function(t){var e=this.formValidate.contentList;e.length>1?(e.splice(t,1),this.formValidate.contentList=e,this.contentListIndex=1):this.$Message.warning("活动天数必须大于等于1")},addContentUp:function(t){var e=this.formValidate.contentList[this.contentListIndex];e.splice(t+1,0,{picName:"",picUrl:"",plan:"",slot:""}),this.formValidate.contentList[this.contentListIndex]=e},deleteContentThis:function(t){var e=this.formValidate.contentList[this.contentListIndex];console.log(e),e.splice(t,1),this.formValidate.contentList[this.contentListIndex]=e},handleSubmit:function(){var t=this,e=this.formValidate;e.startTime&&(e.startTime=this.Jump.dateTransform(e.startTime)),e.endTime&&(e.endTime=this.Jump.dateTransform(e.endTime)),this.$Modal.confirm({title:"确认",content:"确认".concat(this.activityId?"修改":"新建","活动"),onText:"确认",onOk:function(){Object(r["a"])(e).then(function(e){0==e.code?(console.log(e),t.$Message.info("".concat(t.activityId?"修改":"新建","成功")),t.$router.push("/home/activityList")):e.text?t.$Message.warning(e.text):t.$Message.warning("错误")})}}),console.log(this.formValidate.teacherList)},handleReset:function(t){this.$refs[t].resetFields()}}}),l=c,d=(a("9220"),a("2877")),u=Object(d["a"])(l,i,n,!1,null,"cbd090b8",null);e["default"]=u.exports},"33bf":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return s}),a.d(e,"e",function(){return c});var i=a("eca5");function n(t){return Object(i["a"])({url:"/teacher/addOrUpdateOne",method:"POST",params:t})}function r(t){return Object(i["a"])({url:"/teacher/deleteOne?teacherId="+t,method:"POST"})}function o(t){return Object(i["a"])({url:"/teacher/selectActivitiesByTitle?title="+t,method:"POST"})}function s(t){return Object(i["a"])({url:"/teacher/selectByPage",method:"POST",params:t})}function c(t){return Object(i["a"])({url:"/teacher/selectOneById?teacherId="+t,method:"POST"})}},"3e8f":function(t,e){},"87a0":function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return s}),a.d(e,"e",function(){return c});var i=a("eca5");function n(t){return Object(i["a"])({url:"/activity/selectByPage",method:"POST",params:t})}function r(t){return Object(i["a"])({url:"/activity/deleteOne?activityId="+t,method:"POST"})}function o(t){return Object(i["a"])({url:"/activity/findTeachersByName?name="+t,method:"POST"})}function s(t){return Object(i["a"])({url:"/activity/addOrUpdateOne",method:"POST",params:t})}function c(t){return Object(i["a"])({url:"/activity/selectOneById?activityId="+t,method:"POST"})}},9220:function(t,e,a){"use strict";var i=a("d6db"),n=a.n(i);n.a},d6db:function(t,e,a){}}]);