(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c6a0b71"],{"6f27":function(t,e,a){"use strict";var i=a("89ad"),r=a.n(i);r.a},8552:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[a("Row",{staticStyle:{margin:"28px 0 14px"}},[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"活动名称",prop:"activityName"}},[a("Input",{attrs:{size:t.defaultSize,placeholder:"请输入活动名称"},model:{value:t.formValidate.activityName,callback:function(e){t.$set(t.formValidate,"activityName",e)},expression:"formValidate.activityName"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"活动类型",prop:"activityType"}},[a("Select",{attrs:{size:t.defaultSize},model:{value:t.formValidate.activityType,callback:function(e){t.$set(t.formValidate,"activityType",e)},expression:"formValidate.activityType"}},t._l(t.activityType,function(e){return a("Option",{attrs:{value:e.val}},[t._v(t._s(e.title))])}),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"排序依据",prop:"sortName"}},[a("Select",{attrs:{size:t.defaultSize},model:{value:t.formValidate.sortName,callback:function(e){t.$set(t.formValidate,"sortName",e)},expression:"formValidate.sortName"}},t._l(t.sortNameList,function(e){return a("Option",{attrs:{value:e.val}},[t._v(t._s(e.title))])}),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"排序正反",prop:"sortOrder"}},[a("Select",{attrs:{size:t.defaultSize},model:{value:t.formValidate.sortOrder,callback:function(e){t.$set(t.formValidate,"sortOrder",e)},expression:"formValidate.sortOrder"}},[a("Option",{attrs:{value:"desc"}},[t._v("倒序")]),a("Option",{attrs:{value:"asc"}},[t._v("正序")])],1)],1)],1)],1),a("Row",{staticStyle:{margin:"14px 0"}},[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"活动日期",prop:"minStartTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:t.defaultSize,type:"date",placeholder:"开始"},model:{value:t.formValidate.minStartTime,callback:function(e){t.$set(t.formValidate,"minStartTime",e)},expression:"formValidate.minStartTime"}})],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("--")]),a("Col",{staticStyle:{"margin-left":"-50px"},attrs:{span:"5"}},[a("FormItem",{attrs:{prop:"maxEndTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:t.defaultSize,type:"date",placeholder:"结束"},model:{value:t.formValidate.maxEndTime,callback:function(e){t.$set(t.formValidate,"maxEndTime",e)},expression:"formValidate.maxEndTime"}})],1)],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],1),a("h2",{staticStyle:{"padding-bottom":"10px",color:"#515a6e","border-bottom":"2px solid #515a6e"}},[t._v("活动列表")]),a("Table",{staticStyle:{margin:"20px 0"},attrs:{columns:t.jhColumns,data:t.jhData},scopedSlots:t._u([{key:"coach",fn:function(e){var i=e.row;return[a("Tooltip",{attrs:{placement:"top",content:JSON.stringify(i.coach)}},t._l(i.coach,function(e,i){return a("div",{key:i,staticClass:"coachname-item",style:e==t.formValidate.coachName?"color:#2d8cf0;":""},[t._v(t._s(e))])}),0)]}},{key:"handle",fn:function(e){var i=e.row;return[a("div",{staticClass:"handle-item",on:{click:function(e){return t.activityDeleteOneClick(i)}}},[t._v("删除")]),0==i.ended?a("div",{staticClass:"handle-item",on:{click:function(e){return t.activityEndOneClick(i)}}},[t._v("提前结束")]):t._e(),a("div",{staticClass:"handle-item",on:{click:function(e){return t.compileClick(i)}}},[t._v("编辑")])]}}])}),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.jhTotal,current:t.formValidate.currentPage,"page-size":t.formValidate.size,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticStyle:{"padding-bottom":"10px",color:"#515a6e","border-bottom":"2px solid #515a6e"}},[t._v("活动管理")])])}],n=a("f499"),o=a.n(n),c=(a("7f7f"),a("c5f6"),a("ac6a"),a("28a5"),a("87a0")),l=a("933b"),s=a("4bb0"),m={name:"activityList",components:{},data:function(){var t=this;return{defaultSize:"large",formValidate:{currentPage:1,size:20,activityName:"",activityType:"",maxEndTime:"",minStartTime:"",sortName:"startTime",sortOrder:"desc",teacherId:""},sortNameList:[{val:"startTime",title:"开始时间"},{val:"endTime",title:"结束时间"}],activityType:s["a"].activityType,jhColumns:[{title:"活动名称",key:"title",align:"center"},{title:"活动类型",key:"types",align:"center",render:function(t,e){var a="",i=e.row.types.split(",");return i.forEach(function(t,e){a=a+l["a"].activityType(t)+","}),t("div",[a])}},{title:"浏览量",key:"viewNum",align:"center"},{title:"活动开始时间",key:"startTime",align:"center",render:function(e,a){return e("div",[t.Jump.formatDate(a.row.startTime,"Y-M-D h-m-s")])}},{title:"活动结束时间",key:"endTime",align:"center",render:function(e,a){return e("div",[t.Jump.formatDate(a.row.endTime,"Y-M-D h-m-s")])}},{title:"操作",slot:"handle",key:"handle",align:"center"}],jhData:[],jhTotal:100}},created:function(){var t=this.Jump.deep(this.$route.query);this.formValidate.currentPage=t.pageNumber?Number(t.pageNumber):1,this.formValidate.size=t.pageSize?Number(t.pageSize):20,this.start(this.formValidate)},mounted:function(){},methods:{start:function(t){var e=this;Object(c["d"])(t).then(function(t){0==t.code?(e.jhTotal=t.data.total,e.jhData=t.data.rows):t.text?e.$Message.warning(t.text):e.$Message.warning("错误")})},activityDeleteOneClick:function(t){var e=this;this.$Modal.confirm({title:"确认",content:"确认删除「".concat(t.title,"」活动"),onText:"删除",onOk:function(){Object(c["b"])(t.activityId).then(function(a){0==a.code&&(e.$Message.warning("成功删除「".concat(t.title,"」活动")),e.start())})}})},activityEndOneClick:function(t){var e=this;this.$Modal.confirm({title:"确认",content:"确认提前结束「".concat(t.title,"」活动"),onText:"提前结束",onOk:function(){Object(c["b"])(t.activityId).then(function(a){0==a.code&&(e.$Message.warning("「".concat(t.title,"」活动已提前结束")),e.start())})}})},compileClick:function(t){this.$router.push("/home/activityAdd?activityId=".concat(t.activityId))},handleSubmit:function(t){this.formValidate.currentPage=1,this.formValidate.size=20;var e=this.formValidate;e.minStartTime&&(e.minStartTime=this.Jump.dateTransform(e.minStartTime)),e.maxEndTime&&(e.maxEndTime=this.Jump.dateTransform(e.maxEndTime)),this.start(e)},handleReset:function(t){this.$refs[t].resetFields(),this.formValidate.sortName="startTime",this.formValidate.sortOrder="desc"},handleItem:function(t,e){},changePage:function(t){var e=this.$route.name,a=this.Jump.deep(this.$route.query),i=[o()(t),o()(this.formValidate.size)];a.pageNumber=i[0],a.pageSize=i[1],this.$router.push({name:e,query:a})},changeSize:function(t){var e=this.$route.name,a=this.Jump.deep(this.$route.query),i=["1",o()(t)];a.pageNumber=i[0],a.pageSize=i[1],this.$router.push({name:e,query:a})}}},d=m,u=(a("6f27"),a("2877")),f=Object(u["a"])(d,i,r,!1,null,null,null);e["default"]=f.exports},"87a0":function(t,e,a){"use strict";a.d(e,"d",function(){return r}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"e",function(){return l});var i=a("eca5");function r(t){return Object(i["a"])({url:"/activity/selectByPage",method:"POST",params:t})}function n(t){return Object(i["a"])({url:"/activity/deleteOne?activityId="+t,method:"POST"})}function o(t){return Object(i["a"])({url:"/activity/findTeachersByName?name="+t,method:"POST"})}function c(t){return Object(i["a"])({url:"/activity/addOrUpdateOne",method:"POST",params:t})}function l(t){return Object(i["a"])({url:"/activity/selectOneById?activityId="+t,method:"POST"})}},"89ad":function(t,e,a){}}]);